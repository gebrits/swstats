/*! swstats 2018-01-09 */

"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var s=0;s<n.length;s++){var r=n[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,s,r){return s&&t(n.prototype,s),r&&t(n,r),n}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function t(n,s,r){function e(a,o){if(!s[a]){if(!n[a]){var u="function"==typeof require&&require;if(!o&&u)return u(a,!0);if(i)return i(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var f=s[a]={exports:{}};n[a][0].call(f.exports,function(t){var s=n[a][1][t];return e(s||t)},f,f.exports,t,n,s,r)}return s[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)e(r[a]);return e}({1:[function(t,n,s){!function(n){var s=t("./main.js");n.SWindow=s}(window)},{"./main.js":3}],2:[function(t,n,s){n.exports={sum:function(t,n,s,r,e,i){t=void 0===t?{}:t;for(var a=n.length,o=s.length,u=0;u<a;u++)for(var h in n[u].v)t[h]=t[h]||0,t[h]+=n[u].v[h];for(var f=0;f<o;f++)for(var c in s[f].v)t[c]=t[c]||0,t[c]-=s[f].v[c];return t},freq:function(t,n,s,r,e,i){var a=e.sum,o=0,u={};for(var h in a)o+=a[h];for(var f in a)u[f]=a[f]/o;return u},mode:function(t,n,s,r,e,i){var a=e.sum,o=[];for(var u in a)o.push({k:u,t:a[u]});return o.sort(function(t,n){return t.t-n.t}),(o.pop()||{}).k}}},{}],3:[function(t,n,s){function r(t){if("object"!=(void 0===t?"undefined":_typeof(t)))return t;var n={};for(var s in t)n[s]=r(t[s]);return n}function e(t,n,s,r,e){p[t][n]={fn:r,deps:s},e&&c[t].push(n)}function i(t,n,s){var r=p[s][t].deps;return!!r.length&&(r.indexOf(n)>=0||r.reduce(function(t,r){return t||i(r,n,s)},!1))}function a(t,n){var s={},r=!1;t.forEach(function(t){return s[t]=!0});do{r=!1,t.forEach(function(e){p[n][e].deps.forEach(function(n){s[n]||(s[n]=!0,t.push(n),r=!0)})})}while(r);if(t.length>1){var e=null,a=!1;do{a=!1;for(var o=0;o<t.length;o++)for(var u=o;u<t.length;u++)i(t[o],t[u],n)&&(e=t[o],t[o]=t[u],t[u]=e,a=!0)}while(a)}}var o=t("./nops.js"),u=t("./cops.js"),h=[],f={numeric:"numeric",category:"category"},c={numeric:["count","sum","max","min","avg","stdev"],category:["sum","freq","mode"]},v={type:f.numeric,ops:c.numeric,step:1e3},p={numeric:{count:{fn:o.count,deps:[]},sum:{fn:o.sum,deps:[]},max:{fn:o.max,deps:[]},min:{fn:o.min,deps:[]},avg:{fn:o.avg,deps:[]},stdev:{fn:o.stdev,deps:["avg"]}},category:{sum:{fn:u.sum,deps:[]},freq:{fn:u.freq,deps:["sum"]},mode:{fn:u.mode,deps:["sum"]}}};setInterval(function(){var t=Date.now();h.filter(function(t){return!t._pause}).forEach(function(n){for(var s=n._arr,e=n._time,i=n._type,a=[],o=r(n.stats);s.length&&t-s[0].t>e;)a.push(s.shift());n._ops.forEach(function(t){n.stats[t]=p[i][t].fn(n.stats[t],[],a,n._arr,n.stats,o)})})},1e3);var l=function(){function t(n,s){_classCallCheck(this,t),s=s||v,this._options=s,this._arr=[],this._time=n||1e4,this._type=s.type||v.type,this._ops=s.ops||c[this._type],this._step=s.step||v.step,this._pause=!1,this._active=!0,this._oldstats={},this.stats=r(s.stats||{}),a(this._ops,this._type),h.push(this)}return _createClass(t,[{key:"clean",value:function(){this._arr=[],this._oldstats={},this.stats=r(this._options.stats||{})}},{key:"push",value:function(t){if(this._active&&!this._pause)return t=t instanceof Array?t:[t],this._type==f.numeric?this._pushNum(t):this._pushCat(t)}},{key:"pause",value:function(){this._pause=!0}},{key:"resume",value:function(t){var n=this._arr;if(t&&n.length){var s=Date.now()-n[n.length].t;n.length.forEach(function(t){return t.t+=s})}this._pause=!1}},{key:"destroy",value:function(){var t=h.indexOf(this);h.splice(t,1),this._active=!1}},{key:"_pushNum",value:function(t){var n=this,s=Date.now(),e=this._arr,i=this._type,a=r(this.stats);t=t.map(function(t){return{t:s,v:t,l:1,max:t,min:t}}),e.length||e.push({t:s,v:0,l:0,max:-1/0,min:1/0});var o=r(e[e.length-1]);if(s-o.t<this._step){t.forEach(function(t){o.v+=t.v,o.l+=1,o.max=Math.max(o.max,t.v),o.min=Math.min(o.min,t.v)});var u=[e.pop()],h=[o];e.push(o),this._ops.forEach(function(t){n.stats[t]=p[i][t].fn(n.stats[t],h,u,e,n.stats,a)})}else t.forEach(function(t){e.push(t)}),this._ops.forEach(function(s){n.stats[s]=p[i][s].fn(n.stats[s],t,[],e,n.stats,a)});return this}},{key:"_pushCat",value:function(t){var n=this,s=Date.now(),e=this._arr,i=this._type,a=r(this.stats),o={};t.forEach(function(t){o[t]=o[t]||0,o[t]++}),e.length||e.push({t:s,v:{}});var u=r(e[e.length-1]);if(s-u.t<this._step){for(var h in o)u.v[h]=u.v[h]||0,u.v[h]+=o[h];var f=[e.pop()],c=[u];e.push(u),this._ops.forEach(function(t){n.stats[t]=p[i][t].fn(n.stats[t],c,f,e,n.stats,a)})}else{var v={t:s,v:o};e.push(v),this._ops.forEach(function(t){n.stats[t]=p[i][t].fn(n.stats[t],[v],[],e,n.stats,a)})}return this}},{key:"toJSON",value:function(){return this.stats}},{key:"length",get:function(){return this._arr.length}},{key:"window",get:function(){var t=this,n=this._type;return this._arr.map(function(s){var r={};return t._ops.forEach(function(t){r[t]=p[n][t].fn(void 0,[s],[],[s],r,{})}),r})}}]),t}(),_=function(){function t(n,s){_classCallCheck(this,t),s=s||v,this._options=s,this._arr=[],this._size=n||1e3,this._type=s.type||v.type,this._ops=s.ops||c[this._type],this.stats=r(s.stats||{}),a(this._ops,this._type)}return _createClass(t,[{key:"clean",value:function(){this._arr=[],this._oldstats={},this.stats=r(this._options.stats||{})}},{key:"push",value:function(t){return t=t instanceof Array?t:[t],this._type==f.numeric?this._pushNum(t):this._pushCat(t)}},{key:"_pushNum",value:function(t){var n=this,s=this._arr,e=[],i=this._type,a=r(this.stats);for((t=t.map(function(t){return{v:t,l:1,max:t,min:t}})).forEach(function(t){return n._arr.push(t)});this._arr.length>this._size;)e.push(this._arr.shift());return this._ops.forEach(function(r){n.stats[r]=p[i][r].fn(n.stats[r],t,e,s,n.stats,a)}),this}},{key:"_pushCat",value:function(t){var n=this,s=this._arr,e=[],i=this._type,a=r(this.stats),o={v:{}};for(t.forEach(function(t){o.v[t]=o.v[t]||0,o.v[t]++}),this._arr.push(o);this._arr.length>this._size;)e.push(this._arr.shift());return this._ops.forEach(function(t){n.stats[t]=p[i][t].fn(n.stats[t],[o],e,s,n.stats,a)}),this}},{key:"toJSON",value:function(){return this.stats}},{key:"length",get:function(){return this._arr.length}},{key:"window",get:function(){var t=this,n=this._type;return this._arr.map(function(s){var r={};return t._ops.forEach(function(t){r[t]=p[n][t].fn(void 0,[s],[],[s],r,{})}),r})}}]),t}();n.exports={TimeStats:l,SizeStats:_,register:e}},{"./cops.js":2,"./nops.js":4}],4:[function(t,n,s){var r={count:function(t,n,s,r,e,i){for(var a=0,o=r.length,u=0;u<o;u++)a+=r[u].l||1;return a},sum:function(t,n,s,r,e,i){t=void 0===t?0:t;for(var a=n.length,o=s.length,u=0;u<a;u++)t+=n[u].v;for(var h=0;h<o;h++)t-=s[h].v;return t},max:function(t,n,s,r,e,i){for(var a=-1/0,o=r.length,u=0;u<o;u++)a=Math.max(a,r[u].max);return a},min:function(t,n,s,r,e,i){for(var a=1/0,o=r.length,u=0;u<o;u++)a=Math.min(a,r[u].min);return a},avg:function(t,n,s,e,i,a){var o=r.count(0,0,0,n),u=r.count(0,0,0,s),h=r.count(0,0,0,e),f=h-o+u;t=void 0===t?0:t,t*=f;for(var c=0;c<n.length;c++)t+=n[c].v;for(var v=0;v<s.length;v++)t-=s[v].v;return t/=h,isNaN(t)?0:t},stdev:function(t,n,s,e,i,a){a.stdev=a.stdev||{avg:1,sqsum:0,sum:0,stdev:0};for(var o=r.count(0,0,0,n),u=r.count(0,0,0,s),h=(r.count(0,0,0,e),e.length),f=(a.avg,a.stdev.avg,a.stdev.sqsum),c=a.stdev.sum,v=i.avg||0,p=f,l=c,_=0;_<s.length;_++){var m=s[_].v/(s[_].l||1);p-=m*m,l-=m}for(var y=0;y<n.length;y++){var d=n[y].v/(n[y].l||1);p+=d*d,l+=d}var g=Math.sqrt((p-2*v*l+h*v*v)/h);return{avg:v,sqsum:p,sum:l,stdev:g}}};n.exports=r},{}]},{},[1]);