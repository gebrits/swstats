/*! swstats 2018-01-10 */

"use strict";function _classCallCheck(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,s){for(var n=0;n<s.length;n++){var e=s[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(s,n,e){return n&&t(s.prototype,n),e&&t(s,e),s}}();!function t(s,n,e){function r(o,a){if(!n[o]){if(!s[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var h=n[o]={exports:{}};s[o][0].call(h.exports,function(t){var n=s[o][1][t];return r(n||t)},h,h.exports,t,s,n,e)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<e.length;o++)r(e[o]);return r}({1:[function(t,s,n){!function(s){var n=t("./index");s.SWindow=n}(window)},{"./index":2}],2:[function(t,s,n){var e=t("./lib/ops"),r=t("./lib/timestats"),i=t("./lib/sizestats");s.exports={TimeStats:r,SizeStats:i,Operation:e,register:e.register}},{"./lib/ops":4,"./lib/sizestats":6,"./lib/timestats":7}],3:[function(t,s,n){s.exports={sum:function(t,s,n,e,r,i){t=void 0===t?{}:t;for(var o=s.length,a=n.length,u=0;u<o;u++)for(var f in s[u].v)t[f]=t[f]||0,t[f]+=s[u].v[f];for(var h=0;h<a;h++)for(var c in n[h].v)t[c]=t[c]||0,t[c]-=n[h].v[c];return t},freq:function(t,s,n,e,r,i){var o=r.sum,a=0,u={};for(var f in o)a+=o[f];for(var h in o)u[h]=o[h]/a;return u},mode:function(t,s,n,e,r,i){var o=r.sum,a=[];for(var u in o)a.push({k:u,t:o[u]});return a.sort(function(t,s){return t.t-s.t}),(a.pop()||{}).k}}},{}],4:[function(t,s,n){function e(t,s,n,e,r){u[t][s]={fn:e,deps:n},r&&o[t].push(s)}var r=t("./nops"),i=t("./cops"),o={numeric:["count","sum","max","min","avg","stdev"],category:["sum","freq","mode"]},a={numeric:"numeric",category:"category"},u={numeric:{count:{fn:r.count,deps:[]},sum:{fn:r.sum,deps:[]},max:{fn:r.max,deps:[]},min:{fn:r.min,deps:[]},avg:{fn:r.avg,deps:[]},stdev:{fn:r.stdev,deps:["avg"]}},category:{sum:{fn:i.sum,deps:[]},freq:{fn:i.freq,deps:["sum"]},mode:{fn:i.mode,deps:["sum"]}}};s.exports={NOps:r,COps:i,RXOps:u,DEFOps:o,Types:a,register:e}},{"./cops":3,"./nops":5}],5:[function(t,s,n){var e={count:function(t,s,n,e,r,i){for(var o=0,a=e.length,u=0;u<a;u++)o+=e[u].l||1;return o},sum:function(t,s,n,e,r,i){t=void 0===t?0:t;for(var o=s.length,a=n.length,u=0;u<o;u++)t+=s[u].v;for(var f=0;f<a;f++)t-=n[f].v;return t},max:function(t,s,n,e,r,i){for(var o=-1/0,a=e.length,u=0;u<a;u++)o=Math.max(o,e[u].max);return o},min:function(t,s,n,e,r,i){for(var o=1/0,a=e.length,u=0;u<a;u++)o=Math.min(o,e[u].min);return o},avg:function(t,s,n,r,i,o){var a=e.count(0,0,0,s),u=e.count(0,0,0,n),f=e.count(0,0,0,r),h=f-a+u;t=void 0===t?0:t,t*=h;for(var c=0;c<s.length;c++)t+=s[c].v;for(var p=0;p<n.length;p++)t-=n[p].v;return t/=f,isNaN(t)?0:t},stdev:function(t,s,n,r,i,o){o.stdev=o.stdev||{avg:1,sqsum:0,sum:0,stdev:0};for(var a=e.count(0,0,0,s),u=e.count(0,0,0,n),f=(e.count(0,0,0,r),r.length),h=(o.avg,o.stdev.avg,o.stdev.sqsum),c=o.stdev.sum,p=i.avg||0,v=h,l=c,_=0;_<n.length;_++){var m=n[_].v/(n[_].l||1);v-=m*m,l-=m}for(var y=0;y<s.length;y++){var d=s[y].v/(s[y].l||1);v+=d*d,l+=d}var g=Math.sqrt((v-2*p*l+f*p*p)/f);return{avg:p,sqsum:v,sum:l,stdev:g}}};s.exports=e},{}],6:[function(t,s,n){var e=t("./ops"),r=t("./util"),i=e.Types,o=e.RXOps,a=e.DEFOps,u={type:i.numeric,ops:a.numeric,step:1e3},f=function(){function t(s,n){_classCallCheck(this,t),n=n||u,this._options=n,this._arr=[],this._size=s||1e3,this._type=n.type||u.type,this._ops=n.ops||a[this._type],this.stats=r.clone(n.stats||{}),r.sortOps(this._ops,this._type)}return _createClass(t,[{key:"clean",value:function(){this._arr=[],this._oldstats={},this.stats=r.clone(this._options.stats||{})}},{key:"push",value:function(t){return t=t instanceof Array?t:[t],this._type==i.numeric?this._pushNum(t):this._pushCat(t)}},{key:"_pushNum",value:function(t){var s=this,n=this._arr,e=[],i=this._type,a=r.clone(this.stats);for((t=t.map(function(t){return{v:t,l:1,max:t,min:t}})).forEach(function(t){return s._arr.push(t)});this._arr.length>this._size;)e.push(this._arr.shift());return this._ops.forEach(function(r){s.stats[r]=o[i][r].fn(s.stats[r],t,e,n,s.stats,a)}),this}},{key:"_pushCat",value:function(t){var s=this,n=this._arr,e=[],i=this._type,a=r.clone(this.stats),u={v:{}};for(t.forEach(function(t){u.v[t]=u.v[t]||0,u.v[t]++}),this._arr.push(u);this._arr.length>this._size;)e.push(this._arr.shift());return this._ops.forEach(function(t){s.stats[t]=o[i][t].fn(s.stats[t],[u],e,n,s.stats,a)}),this}},{key:"length",get:function(){return this._arr.length}},{key:"window",get:function(){var t=this,s=this._type;return this._arr.map(function(n){var e={};return t._ops.forEach(function(t){e[t]=o[s][t].fn(void 0,[n],[],[n],e,{})}),e})}}]),t}();s.exports=f},{"./ops":4,"./util":8}],7:[function(t,s,n){var e=t("./ops"),r=t("./util"),i=e.Types,o=e.RXOps,a=e.DEFOps,u={type:i.numeric,ops:a.numeric,step:1e3},f=[];setInterval(function(){var t=Date.now();f.filter(function(t){return!t._pause}).forEach(function(s){for(var n=s._arr,e=s._time,i=s._type,a=[],u=r.clone(s.stats);n.length&&t-n[0].t>e;)a.push(n.shift());s._ops.forEach(function(t){s.stats[t]=o[i][t].fn(s.stats[t],[],a,s._arr,s.stats,u)})})},1e3);var h=function(){function t(s,n){_classCallCheck(this,t),n=n||u,this._options=n,this._arr=[],this._time=s||1e4,this._type=n.type||u.type,this._ops=n.ops||a[this._type],this._step=n.step||u.step,this._pause=!1,this._active=!0,this._oldstats={},this.stats=r.clone(n.stats||{}),r.sortOps(this._ops,this._type),f.push(this)}return _createClass(t,[{key:"clean",value:function(){this._arr=[],this._oldstats={},this.stats=r.clone(this._options.stats||{})}},{key:"push",value:function(t){if(this._active&&!this._pause)return t=t instanceof Array?t:[t],this._type==i.numeric?this._pushNum(t):this._pushCat(t)}},{key:"pause",value:function(){this._pause=!0}},{key:"resume",value:function(t){var s=this._arr;if(t&&s.length){var n=Date.now()-s[s.length].t;s.length.forEach(function(t){return t.t+=n})}this._pause=!1}},{key:"destroy",value:function(){var t=f.indexOf(this);f.splice(t,1),this._active=!1}},{key:"_pushNum",value:function(t){var s=this,n=Date.now(),e=this._arr,i=this._type,a=r.clone(this.stats);t=t.map(function(t){return{t:n,v:t,l:1,max:t,min:t}}),e.length||e.push({t:n,v:0,l:0,max:-1/0,min:1/0});var u=r.clone(e[e.length-1]);if(n-u.t<this._step){t.forEach(function(t){u.v+=t.v,u.l+=1,u.max=Math.max(u.max,t.v),u.min=Math.min(u.min,t.v)});var f=[e.pop()],h=[u];e.push(u),this._ops.forEach(function(t){s.stats[t]=o[i][t].fn(s.stats[t],h,f,e,s.stats,a)})}else t.forEach(function(t){e.push(t)}),this._ops.forEach(function(n){s.stats[n]=o[i][n].fn(s.stats[n],t,[],e,s.stats,a)});return this}},{key:"_pushCat",value:function(t){var s=this,n=Date.now(),e=this._arr,i=this._type,a=r.clone(this.stats),u={};t.forEach(function(t){u[t]=u[t]||0,u[t]++}),e.length||e.push({t:n,v:{}});var f=r.clone(e[e.length-1]);if(n-f.t<this._step){for(var h in u)f.v[h]=f.v[h]||0,f.v[h]+=u[h];var c=[e.pop()],p=[f];e.push(f),this._ops.forEach(function(t){s.stats[t]=o[i][t].fn(s.stats[t],p,c,e,s.stats,a)})}else{var v={t:n,v:u};e.push(v),this._ops.forEach(function(t){s.stats[t]=o[i][t].fn(s.stats[t],[v],[],e,s.stats,a)})}return this}},{key:"length",get:function(){return this._arr.length}},{key:"window",get:function(){var t=this,s=this._type;return this._arr.map(function(n){var e={t:n.t};return t._ops.forEach(function(t){e[t]=o[s][t].fn(void 0,[n],[],[n],e,{})}),e})}}]),t}();s.exports=h},{"./ops":4,"./util":8}],8:[function(t,s,n){function e(t){if("object"!=(void 0===t?"undefined":_typeof(t)))return t;var s={};for(var n in t)s[n]=e(t[n]);return s}function r(t,s,n){var e=o[n][t].deps;return!!e.length&&(e.indexOf(s)>=0||e.reduce(function(t,e){return t||r(e,s,n)},!1))}function i(t,s){var n={},e=!1;t.forEach(function(t){return n[t]=!0});do{e=!1,t.forEach(function(r){o[s][r].deps.forEach(function(s){n[s]||(n[s]=!0,t.push(s),e=!0)})})}while(e);if(t.length>1){var i=null,a=!1;do{a=!1;for(var u=0;u<t.length;u++)for(var f=u;f<t.length;f++)r(t[u],t[f],s)&&(i=t[u],t[u]=t[f],t[f]=i,a=!0)}while(a)}}var o=t("./ops").RXOps;s.exports={clone:e,depends:r,sortOps:i}},{"./ops":4}]},{},[1]);